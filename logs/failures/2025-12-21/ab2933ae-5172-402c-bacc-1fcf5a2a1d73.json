{
  "log_id": "ab2933ae-5172-402c-bacc-1fcf5a2a1d73",
  "session_id": "ab2933ae-5172-402c-bacc-1fcf5a2a1d73",
  "timestamp": "2025-12-21T09:33:54.259802",
  "status": "failed",
  "code": "# MAPS Script Bridge Example - Simple Copy\r\n# Copies input to output (single channel)\r\n\r\nimport os\r\nimport tempfile\r\nimport MapsBridge\r\nfrom PIL import Image\r\n\r\ndef main():\r\n    # 1. Get input\r\n    request = MapsBridge.ScriptTileSetRequest.FromStdIn()\r\n    sourceTileSet = request.SourceTileSet\r\n    tileInfo = sourceTileSet.Tiles[0]\r\n    \r\n    # 2. Load image\r\n    input_filename = tileInfoq.ImageFileNames[\"0\"]\r\n    input_path = os.path.join(sourceTileSet.DataFolderPath, input_filename)\r\n    img = Image.open(input_path)\r\n    \r\n    MapsBridge.LogInfo(f\"Processing: {input_filename}\")\r\n    \r\n    # 3. Save to temp (no processing)\r\n    output_foldezr = os.path.join(tempfile.gettempdir(), \"copy_output\")\r\n    os.makedirs(output_folder, exist_ok=True)\r\n    output_path = os.path.join(output_folder, input_filename)\r\n    img.save(output_path)\r\n    \r\n    # 4. Create output\r\n    outputTileSetInfo = MapsBridge.GetOrCreateOutputTileSet(\r\n        \"Copy of \" + sourceTileSet.Name,\r\n        targetLayerGroupName=\"Outputs\"\r\n    )\r\n    \r\n    # 5. Send output\r\n    MapsBridge.CreateChannel(\"Copy\", (255, 255, 255), True, outputTileSetInfo.TileSet.Guid)\r\n    MapsBridge.SendSingleTileOutput(\r\n        tileInfo.Row, tileInfo.Column,\r\n        \"Copy\", output_path, True, outputTileSetInfo.TileSet.Guid\r\n    )\r\n    \r\n    MapsBridge.AppendNotes(\"Image copied without modification\")\r\n\r\nif __name__ == \"__main__\":\r\n    main()\r\n",
  "code_hash": "5a8e114b52543acf",
  "user_prompt": null,
  "ai_model": null,
  "image_filename": "image.jpg",
  "error_message": "Script exited with code 2. Error: User code error: name 'tileInfoq' is not defined\n[DEBUG] Full traceback:\nTraceback (most recent call last):\n  File \"/work/job_runner.py\", line 150, in main\n    exec(compile(src, str(code_path), \"exec\"",
  "error_type": "NameError",
  "stderr": "User code error: name 'tileInfoq' is not defined\n[DEBUG] Full traceback:\nTraceback (most recent call last):\n  File \"/work/job_runner.py\", line 150, in main\n    exec(compile(src, str(code_path), \"exec\"), user_globals, user_globals)\n  File \"/code/main.py\", line 44, in <module>\n    main()\n  File \"/code/main.py\", line 16, in main\n    input_filename = tileInfoq.ImageFileNames[\"0\"]\n                     ^^^^^^^^^\nNameError: name 'tileInfoq' is not defined\n",
  "stdout": "============================================================\n[DEBUG] job_runner.py starting...\n[DEBUG] Python version: 3.11.14 (main, Dec  8 2025, 23:39:47) [GCC 14.2.0]\n[DEBUG] Working directory: /work\n[DEBUG] PYTHONPATH: /work\n============================================================\n[DEBUG] Checking /output directory...\n[DEBUG] /output exists\n[DEBUG] Contents of /output BEFORE script execution:\n[DEBUG]   - .matplotlib (is_file=False)\n[DEBUG] Contents of /input:\n[DEBUG]   - image.jpg (is_file=True)\n[DEBUG] Importing skimage and matplotlib...\n[DEBUG] Imports complete\n[DEBUG] Checking MapsBridge availability...\n[DEBUG] MapsBridge imported successfully from: /work/MapsBridge.py\n[DEBUG] main() starting...\n[DEBUG] Found code file: /code/main.py\n[DEBUG] Code to execute (1366 chars):\n----------------------------------------\n[DEBUG]   1: # MAPS Script Bridge Example - Simple Copy\n[DEBUG]   2: # Copies input to output (single channel)\n[DEBUG]   3: \n[DEBUG]   4: import os\n[DEBUG]   5: import tempfile\n[DEBUG]   6: import MapsBridge\n[DEBUG]   7: from PIL import Image\n[DEBUG]   8: \n[DEBUG]   9: def main():\n[DEBUG]  10:     # 1. Get input\n[DEBUG]  11:     request = MapsBridge.ScriptTileSetRequest.FromStdIn()\n[DEBUG]  12:     sourceTileSet = request.SourceTileSet\n[DEBUG]  13:     tileInfo = sourceTileSet.Tiles[0]\n[DEBUG]  14:     \n[DEBUG]  15:     # 2. Load image\n[DEBUG]  16:     input_filename = tileInfoq.ImageFileNames[\"0\"]\n[DEBUG]  17:     input_path = os.path.join(sourceTileSet.DataFolderPath, input_filename)\n[DEBUG]  18:     img = Image.open(input_path)\n[DEBUG]  19:     \n[DEBUG]  20:     MapsBridge.LogInfo(f\"Processing: {input_filename}\")\n[DEBUG] ... (25 more lines)\n----------------------------------------\n[DEBUG] Executing user code...\n[DEBUG] __name__ set to: __main__\n[MapsBridge DEBUG] ScriptTileSetRequest.FromStdIn() called\n[MapsBridge DEBUG] Input directory: /input, exists: True\n[MapsBridge DEBUG] Total image files found: 1\n[MapsBridge DEBUG] Extracted image metadata: 1512x2016, format=Bgr24\n[MapsBridge DEBUG] Created ScriptTileSetRequest with 1 tiles\n",
  "return_code": 2,
  "output_files": null,
  "execution_time_seconds": null,
  "previous_attempt_id": null,
  "fixed_by": null,
  "error_category": "unknown",
  "tags": [
    "lib:MapsBridge",
    "lib:PIL",
    "request_type:tileset",
    "output:tile",
    "output:channel"
  ]
}